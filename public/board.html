<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Board — Bull$hit! Bingo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;900&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <header class="board-header">
    <a href="/" class="back-link">&larr; Home</a>
    <div class="header-spacer"></div>
    <button id="share-btn" class="btn btn-small btn-secondary">Copy Link</button>
  </header>

  <main class="board-main" style="opacity:0">
    <h1 id="board-name" class="board-name-hero"></h1>
    <div id="game-timer" class="game-timer hidden">
      <span class="timer-dot"></span>
      <span id="timer-label" class="timer-label"></span>
    </div>

    <!-- Inline Join Section -->
    <section id="join-section" class="join-card hidden">
      <h2>Join the Game</h2>
      <p class="hint">Pick a name and color so others can see your card.</p>
      <form id="join-form" class="join-inline-form">
        <div class="join-row">
          <input
            type="text"
            id="join-name"
            placeholder="Your name"
            maxlength="20"
            autocomplete="off"
            required
          >
          <button type="submit" class="btn btn-primary" id="join-submit-btn" disabled>Join</button>
        </div>
        <div class="color-picker">
          <button type="button" class="color-swatch" data-color="#FF6B35" style="background:#FF6B35" title="Orange"></button>
          <button type="button" class="color-swatch" data-color="#DAA520" style="background:#DAA520" title="Gold"></button>
          <button type="button" class="color-swatch" data-color="#6B8E23" style="background:#6B8E23" title="Avocado"></button>
          <button type="button" class="color-swatch" data-color="#B7410E" style="background:#B7410E" title="Rust"></button>
          <button type="button" class="color-swatch" data-color="#D4A574" style="background:#D4A574" title="Tan"></button>
          <button type="button" class="color-swatch" data-color="#3b82f6" style="background:#3b82f6" title="Blue"></button>
          <button type="button" class="color-swatch" data-color="#ec4899" style="background:#ec4899" title="Pink"></button>
          <button type="button" class="color-swatch" data-color="#06b6d4" style="background:#06b6d4" title="Teal"></button>
        </div>
      </form>
    </section>

    <!-- Setup Mode -->
    <section id="setup-section" class="setup-card hidden">
      <h2>What do they always do?</h2>
      <p class="hint">Add their go-to moves. 8 topics = 3&times;3, 15 = 4&times;4, 24 = 5&times;5</p>

      <form id="topic-form" class="topic-form">
        <input
          type="text"
          id="topic-input"
          placeholder="e.g. &quot;Brings up their golf handicap&quot;"
          maxlength="80"
          autocomplete="off"
          required
        >
        <button type="submit" class="btn btn-primary">Add</button>
      </form>

      <div id="topic-list" class="topic-list"></div>

      <div id="reward-row" class="reward-row hidden">
        <input type="text" id="reward-input" class="reward-input" placeholder="Stakes? e.g. loser buys a marg" maxlength="100" autocomplete="off">
      </div>

      <div class="setup-actions">
        <span id="topic-count" class="topic-count">0 topics</span>
        <span id="waiting-host" class="waiting-host hidden">Waiting for host to start…</span>
        <button id="play-btn" class="btn btn-primary btn-play" disabled>Start Game</button>
      </div>
    </section>

    <!-- Play Mode -->
    <section id="play-section" class="play-section hidden">
      <div class="play-controls">
        <button id="back-setup-btn" class="btn btn-small btn-secondary hidden">&larr; Topics</button>
        <button id="reshuffle-btn" class="btn btn-small btn-secondary">Reshuffle</button>
        <button id="reset-game-btn" class="btn btn-small btn-reset hidden">Reset Game</button>
      </div>

      <!-- Your card -->
      <div id="my-card-wrapper" class="my-card-wrapper">
        <div class="card-owner-label" id="my-card-label"></div>
        <div id="reward-display" class="reward-display hidden"></div>
        <div id="bingo-grid" class="bingo-grid"></div>
      </div>

      <!-- Other players' mini cards -->
      <div id="other-players" class="other-players-scroll"></div>

      <!-- Leaderboard -->
      <section id="leaderboard-section" class="leaderboard-card hidden">
        <h2>Leaderboard</h2>
        <div id="leaderboard-list" class="leaderboard-list"></div>
      </section>
    </section>
  </main>

  <!-- Bingo overlay -->
  <div id="bingo-overlay" class="bingo-overlay hidden">
    <div class="bingo-overlay-content">
      <div class="bingo-text">BINGO!</div>
      <div class="bingo-winner" id="bingo-winner"></div>
    </div>
  </div>

  <canvas id="confetti-canvas"></canvas>

  <script src="/js/confetti.js"></script>
  <script type="module" src="/js/board.js"></script>
</body>
</html>
